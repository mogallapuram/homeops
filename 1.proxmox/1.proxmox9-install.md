# üß© Proxmox VE 9 Installation & Post-Setup (HomeOps Edition)

This document covers the complete workflow for setting up **Proxmox VE 9** on a new host, including ISO installation, post-installation configuration, removing the subscription popup, and applying a black theme.

---

## 1Ô∏è‚É£ Download the Proxmox VE 9 ISO

**Official site:**  
üëâ https://www.proxmox.com/en/downloads

Choose:
> **Proxmox VE 9.x ISO Installer**

(Optional) verify checksum:
```bash
sha256sum proxmox-ve_9*.iso
```

---

## 2Ô∏è‚É£ Create Bootable USB (Windows ‚Äì Rufus)

1. Download **Rufus** ‚Üí https://rufus.ie  
2. Insert a USB stick (‚â• 8 GB)  
3. Select:
   - **Boot selection:** `proxmox-ve_9*.iso`  
   - **Partition scheme:** GPT  
   - **Target system:** UEFI  
   - When prompted, pick *DD Image* mode  
4. Click **Start** and wait until finished.

---

## 3Ô∏è‚É£ Install Proxmox VE 9

1. Boot the server from the USB drive.  
2. Select **Install Proxmox VE (Graphical)**.  
3. Accept the license.  
4. Choose the target disk (SSD/NVMe recommended).  
5. Configure:
   - **Location & Keyboard**
   - **Root password** + **Email**
6. Network configuration (example):
   ```
   Hostname: node1.cloud4ram.com
   IP Address: 10.10.10.200/23
   Gateway: 10.10.10.1
   DNS Server: 10.10.10.5     # Pi-hole IP
   ```
7. Click **Install** ‚Üí reboot.

Access after boot:
```
https://10.10.10.200:8006
```
Login:  
`root` / <your password> (Realm: PAM)

---

## 4Ô∏è‚É£ Post-Installation Configuration

SSH into the node:
```bash
ssh root@10.10.10.200
```

### Disable the enterprise repo & enable the free no-subscription repo
```bash
# Disable enterprise repo
sed -i 's|^deb https://enterprise.proxmox.com/debian/pve|# deb https://enterprise.proxmox.com/debian/pve|g' /etc/apt/sources.list.d/pve-enterprise.list

# Add no-subscription repo (for Debian Trixie / PVE 9)
cat > /etc/apt/sources.list.d/pve-no-subscription.list <<EOF
deb http://download.proxmox.com/debian/pve trixie pve-no-subscription
EOF

# Confirm Debian base repos
cat > /etc/apt/sources.list.d/debian-trixie.list <<EOF
deb http://deb.debian.org/debian trixie main contrib non-free-firmware
deb http://deb.debian.org/debian trixie-updates main contrib non-free-firmware
deb http://security.debian.org/debian-security trixie-security main contrib non-free-firmware
EOF
```

---

## 5Ô∏è‚É£ Update Packages & System

```bash
apt update
apt dist-upgrade -y
apt install -y curl wget net-tools htop ifupdown2
apt autoremove -y && apt clean
```

Restart the web UI:
```bash
systemctl restart pveproxy
```

---

## 6Ô∏è‚É£ Remove Subscription Popup (‚úÖ Working Fix)

By default, Proxmox shows a **‚ÄúNo valid subscription‚Äù** popup on login.  
You can safely remove it by editing the JavaScript logic that handles subscription status.

---

### üõ† Steps

1. **Backup the original file first**
   ```bash
   cp /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js       /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js.bak.$(date +%F-%H%M)
   ```

2. **Edit the file**
   ```bash
   nano /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js
   ```

3. **Find these lines (use Ctrl + W ‚Üí search for `res.data.status.toLowerCase`)**
   You should see something like:
   ```js
   res.data.status.toLowerCase() !== 'active'
   ```

4. **Change it to the following:**
   ```js
   res.data.status.toLowerCase() === 'active'
   ```

5. **Save and restart the proxy**
   ```bash
   systemctl restart pveproxy
   ```

6. **Clear your browser cache or open in Incognito**
   Press `Ctrl + Shift + R` (hard refresh) to reload the updated UI.

‚úÖ This change correctly disables the popup and keeps the Proxmox web interface stable.  
If you ever need to revert, restore from your backup:
```bash
cp /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js.bak.*    /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js
systemctl restart pveproxy
```

---

## 7Ô∏è‚É£ Verify Setup

```bash
pveversion
pvecm status
systemctl status pvedaemon
```

Example output:
```
pve-manager/9.x-1 (Trixie)
```

Access web UI:
```
https://10.10.10.200:8006
```

---

## 8Ô∏è‚É£ Optional ‚Äì Apply a Black Theme (Dark Mode for Proxmox)

If you prefer a modern dark theme for the Proxmox web interface, you can use the **Proxmox-Dark Theme** package by We10X.  
This theme adds a clean black/dark-gray interface and automatically re-applies after updates.

### ‚öôÔ∏è Installation Steps

1. SSH into your Proxmox node:
   ```bash
   ssh root@10.10.10.200
   ```

2. Download and install the theme:
   ```bash
   bash <(curl -s https://raw.githubusercontent.com/We10X/Proxmox-Dark/main/Installer.sh)
   ```

3. Wait for installation to complete ‚Äî it will automatically:
   - Patch Proxmox UI files  
   - Backup originals  
   - Add cron job to persist through updates  

4. Refresh the web UI:
   ```
   https://10.10.10.200:8006
   ```
   üîÅ Press **Ctrl + Shift + R** for a full reload.

### üß© Reverting the Theme
If you want to restore the default Proxmox theme:
```bash
bash <(curl -s https://raw.githubusercontent.com/We10X/Proxmox-Dark/main/Uninstaller.sh)
```

### üåì Notes

- Works perfectly on **Proxmox VE 8.x & 9.x**
- Compatible with **Trixie / Bookworm** base
- Automatically reapplied after upgrades

---

## üß† Summary

| Step | Description |
|------|--------------|
| 1 | Download ISO |
| 2 | Create bootable USB |
| 3 | Install Proxmox VE 9 |
| 4 | Configure repos |
| 5 | Update packages |
| 6 | Remove subscription popup |
| 7 | Verify system |
| 8 | Optional: Apply dark theme |

---

**Author:** Ramakrishna Mogallapu  
**Project:** HomeOps ‚Äî Building a Fully Automated K3s Homelab  
**Proxmox Version:** 9.x (Trixie)  
**Revision:** 1.2  
**Date:** 20 Oct 2025
